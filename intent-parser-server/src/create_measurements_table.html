<!DOCTYPE html>
<html>
<body>
  <script>
    function onSuccess() {
        google.script.host.close();
    }
    function handleCancel() {
        google.script.host.close();
    }
    function handleSubmit() {
        var extra = {"action": "createMeasurementTable"};
        var theForm = this.createMeasurementTableForm;
        var formInfo = {'cursorChildIndex' : theForm.cursorChildIndex.value,
                        'formName' : theForm.formName.value,
                        'lab' : theForm.lab.value,
                        'numReagents' : theForm.num_reagents.value,
                        'temperature' : theForm.temperature.checked,
                        'timepoint' : theForm.timepoint.checked,
                        'numRows' : theForm.num_rows.value};
        formInfo.extra = extra;
        google.script.run.withSuccessHandler(onSuccess).submitForm(formInfo);
    }
  </script>
  <center>
    <form name="createMeasurementTableForm" action="/add">
      <input type="hidden" name="cursorChildIndex" value="${CURSOR_CHILD_INDEX}">
      <input type="hidden" name="formName" value="createMeasurementTable">
      <table stype="width:100%">
        <tr>
          <th align="right">Lab: </th>
          <td align="left">
            <select id="lab" name="lab">
              ${LABIDSOPTIONS}
            </select>
          </td>
        </tr>
        <tr>
          <th align="right">Number of reagents: </th>
          <td>
            <input type="text" name="num_reagents" value="0">
          </td>
        </tr>
        <tr>
          <th align="right">Temperature: </th>
          <td>
            <input type="checkbox" name="temperature">
          </td>
        </tr>
        <tr>
          <th align="right">Timepoint: </th>
          <td>
            <input type="checkbox" name="timepoint">
          </td>
        </tr>
        <tr>
          <th align="right">Number of rows/measurements: </th>
          <td>
            <input type="text" name="num_rows">
          </td>
        </tr>
      </table>
      <br>
      <input type="button" value="Submit" id="submitButton" onclick="handleSubmit()">
      <input type="button" value="Cancel" id="cancelButton" onclick="handleCancel()">
    </form>
  </center>
</body>
</html>
